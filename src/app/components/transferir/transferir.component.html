<div class="container mt-5">
    <div class="row animate__animated animate__bounceInRight">
        <div class="col-lg-8 offset-lg-2">
            <div class="card">
                <div class="card-body">
                    <h5 class="titulo ">Realizar nueva transferencia</h5>
                    <form [formGroup]="transferenciaForm" (ngSubmit)="nuevaTransferencia()" class="mt-2" >
                        <div class="form-floating mb-3 ">
                            <input type="text" class="form-control" [(ngModel)]="searchValue" [ngModelOptions]="{standalone: true}" id="destinatarioBusqueda" />
                            <label for="destinatarioBusqueda">Buscar destinatario</label>
                            <small id="destinatarioAyuda" class="form-text text-muted">Para mostrar todos los destinatarios utilizar palabra clave "todos" o "all".</small>

                            
                        </div>

                        <div class="row" *ngIf="searchValue.length > 0 && !seleccionado" >
                          
                            <div class=" col-sm-6 my-2 animate__animated animate__fadeIn" *ngFor="let destinatario of listaDestinatarios | appFilter:searchValue">
                              <div class="card border-0 shadow rounded bg-body">
                                <div class="card-body ">
                                  <h5 class="card-title"> <i class="fas fa-user-circle"></i> {{destinatario.nombre}} <i class="fas fa-minus-circle float-end selectable" (click)="eliminarDestinatario(destinatario._id)"></i></h5>
                                  <p class="card-text">RUT: {{destinatario.rut}}. </p>
                                  <p class="card-text">Banco: {{destinatario.banco}} -
                                    {{destinatario.tipoCuenta}}. </p>
                                    <p class="card-text"> N° Cuenta: {{destinatario.numeroCuenta}}. </p>
                                    <p class="card-text"> Correo: {{destinatario.correo}}. </p>
                                  
                                  <a (click)="destinatarioSeleccionado(destinatario._id)"  class="btn btn-secondary">Seleccionar</a>
                                </div>
                              </div>
                            </div>      
                          
                        </div>

                        <div class="row" *ngIf="seleccionado">
                          <div class=" col-sm-6 my-2 animate__animated animate__fadeIn" >
                            <div class="card border-0 shadow rounded bg-body">
                              <div class="card-body">
                                <h5 class="card-title"> <i class="fas fa-user-circle"></i> {{nombre}} <i class="fas fa-minus-circle float-end selectable" (click)="eliminarDestinatario(_id)"></i> </h5>
                                <p class="card-text">RUT: {{rut}}. </p>
                                <p class="card-text">Banco: {{banco}} -
                                  {{tipoCuenta}}. </p>
                                  <p class="card-text"> N° Cuenta: {{numeroCuenta}}. </p>
                                  <p class="card-text"> Correo: {{correo}}. </p>
                                 
                                <a (click)="obtenerDestinatarios()"  class="btn btn-primary">Deseleccionar</a>
                              </div>
                            </div>
                          </div>  
                        </div>


                        <div class="form-floating mb-3 animate__animated animate__fadeIn" *ngIf="seleccionado">
                            <input type="number" class="form-control" formControlName="monto"  id="monto" required>
                            <label for="monto">Monto</label>
                            
                        </div>
                        <div class="mb-3">
                            <button routerLink="/" class="btn btn-secondary btn-lg float-start" type="button">Volver</button>
                            <button type="submit" [disabled]="transferenciaForm.invalid" class="btn btn-success btn-lg float-end">Aceptar</button>

                        </div>
                        
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>